{% extends 'base.html' %}

{% load static%}

{% block content %}

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Виртуальный офис</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <span data-feather="plus-circle"></span>
          </a>
        </h6>
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="{% url 'clients' %}">
              <span data-feather="users"></span>
              База клиентов<span class="sr-only">(current)</span></span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'knbase:get_articles'  %}">
              <span data-feather="file-text"></span>
              База знаний
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'users' %}">
              <span data-feather="file-text"></span>
              Штат
            </a>
          </li> 
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>База клиентов</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <span data-feather="plus-circle"></span>
          </a>
        </h6>
        <ul class="nav flex-column mb-2">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="file-text"></span>
              Список клиентов
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href={% url 'create_client' %}>
              <span data-feather="file-text"></span>
              Добавить клиента
            </a>
          </li>          
        </ul>
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Разделы в разработке</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <span data-feather="plus-circle"></span>
          </a>
        </h6>
        <ul class="nav flex-column">
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Рассылки
            </span>
          </li> 
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="shopping-cart"></span>
              CRM
            </span>
          </li>
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Контент-план
            </span>
          </li>
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Менеджер задач
            </span>
          </li> 
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Календарь мероприятий
            </span>
          </li>
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              SMM
            </span>
          </li> 
          <li class="nav-item">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Telegram-bot
            </span>
          </li> 
          <li class="nav-item disabled">
            <span class="nav-link text-secondary">
              <span data-feather="file-text"></span>
              Мой профиль
            </span>
          </li> 

        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4" id='mainContainer'>

      <h2>База клиентов</h2>
      <div class="navbar nav-justified">
        <form class="form-inline" id="searchForm" action="{% url 'clients:extra' %}">
          <input class="form-control col-sm-6 mr-sm-2 border border-secondary" type="search" id='search' name="search" placeholder="Поиск по фамилии, имени, номеру телефона" aria-label="Search">
          <button class="btn btn-primary my-2 my-sm-0" type="submit">Искать</button>
          <small class="form-text text-muted">
            Вводите что-то одно. Телефон пишите в формате 79xxxxxxxxx (то есть, 7 и последние 10 цифр без пробелов, скобок и других знаков)
          </small>
        </form>
        <div class="form-control">
          
        </div>
      </div>
      <ul class="nav nav-pills nav-fill" role="tablist" id='filters'>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link active" href="{% url 'clients:extra' %}?page={{page}}">Без фильтра</a>
        </li>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link" href="{% url 'clients:extra' %}?page=1&filter=is_base_course">Прошли БК</a>
        </li>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link" href="{% url 'clients:extra' %}?page=1&filter=is_assisting">Ассистировали</a>
        </li>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link" href="{% url 'clients:extra' %}?page=1&filter=future_assisting">Хотят ассистировать</a>
        </li>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link" href="{% url 'clients:extra' %}?page=1&filter=is_school_level_1">Прошли ИШ1</a>
        </li>
        <li class="nav-item">
          <a  data-toggle="pill" class="nav-link" href="{% url 'clients:extra' %}?page=1&filter=is_school_level_2">Прошли ИШ2</a>
        </li>
      </ul>
      <span id='clientUrl' data-url="{% url 'client' 1 %}" 
                           data-page='{{page}}'
                           data-extra="{% url 'clients:extra' %}?page={{page}}">
                          </span>
      <div class="table-responsive">
        <table class="table table-striped table-sm" id='tableClients'>
          <thead>
            <tr>
              <th>Статус</th>
              <th>ФИО</th>
              <th>Дата рождения</th>
              <th>Город</th>
              <th>Телефон</th>
              <th>Комментарий</th>
              <th>Примечание</th>
              <th>В каких состоит чатах</th>
              <th>Какой способ связи предпочитает: </th>
              <th>Комментарии по общению с клиентом:</th>
              <th>Кандидаты на курс:</th>
              
            </tr>
          </thead>
          <tbody class="table-hover" id="clientsTable">            
          </tbody>
        </table>
      </div>
      
      <nav aria-label="Page navigation" >
        <ul class="pagination justify-content-center" id="nav_buttons">
        </ul>
      </nav>

    </main>
  </div>
</div>

<script src={% static 'js/utils.js' %}></script>
<script src={% static 'js/clients/clients_table.js' %}></script>
  
{% endblock %}

